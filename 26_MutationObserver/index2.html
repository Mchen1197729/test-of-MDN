<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Mutation Observer2</title>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      background-color: #fefefe;
      padding: 0;
      margin: 0;
    }

    #box {
      width: 200px;
      height: 200px;
      background-color: pink;
      margin: 0 auto;
    }
  </style>
</head>
<body>
<div id="box"></div>
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<input type="text" id="username" value="">
<script>
  //构造函数接受一个回调函数作为参数 该回调函数有两个参数 1.发生变化的dom结构组成的数组 2.观察器本身
  let observer = new MutationObserver(function (mutations, observer) {
    console.log(mutations)
    mutations.forEach(function (mutation) {
      console.log(mutation)
    })
  })
  //实例方法:observe(需要观察的dom节点,配置对象) 配置对象有三种属性可以写
  let username = document.getElementById('username')
  //注意：至少必须同时指定这三种观察的一种，若均未指定将报错
  observer.observe(username, {
    //子节点的变动
    childList: true,
    //属性的变动
    attributes: true,
    //节点内容或者节点文本的变动
    characterData: true,

    subtree: true
  })
</script>
</body>
</html>
